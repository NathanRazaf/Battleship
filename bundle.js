(()=>{var e={866:(e,t,r)=>{const a=r(644);e.exports=function(){const e=a("Computer"),t=e.attack;return e.attack=function(r){let a=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());for(;e.attacksMade.some((e=>e[0]===a&&e[1]===o));)a=Math.floor(10*Math.random()),o=Math.floor(10*Math.random());t(r,a,o)},e}},244:e=>{e.exports=function(){const e=new Array(10).fill(null).map((()=>new Array(10).fill(null))),t=[],r=[],a=[],o=[];return{grid:e,coordsShips:t,ships:r,missedAttacks:a,successfulAttacks:o,isAllSunk:function(){for(let e=0;e<r.length;e++)if(!r[e].isSunk())return!1;return!0},placeShip:function(a,o,n,s){let c=!0;switch(s){case"h":if(n+a.length-1>9)return!1;for(let t=0;t<a.length;t++)if(null!==e[o][n+t]){c=!1;break}if(c)for(let s=0;s<a.length;s++)e[o][n+s]=a,t.push([o,n+s]),r.push(a);break;case"v":if(o+a.length-1>9)return!1;for(let t=0;t<a.length;t++)if(null!==e[o+t][n]){c=!1;break}if(c)for(let s=0;s<a.length;s++)e[o+s][n]=a,t.push([o+s,n]),r.push(a)}return c},receiveAttack:function(t,r){null===e[t][r]?a.push([t,r]):(e[t][r].hit(),o.push([t,r]))}}}},644:(e,t,r)=>{const a=r(244),o=r(545);e.exports=function(e){this.name=e;const t=a(),r=[];return{name:e,attack:function(e,t,a){e.gameBoard.receiveAttack(t,a),r.push([t,a])},attacksMade:r,gameBoard:t,placeShipsAtRandom:function(){t.coordsShips.length=0,t.ships.length=0;for(let e=0;e<10;e++)for(let r=0;r<10;r++)t.grid[e][r]=null;[5,4,3,3,2].forEach((e=>{const r=o(e);let a,n,s;do{a=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),s=0===Math.floor(2*Math.random())?"h":"v"}while(!t.placeShip(r,a,n,s))}))}}}},545:e=>{e.exports=function(e){return this.length=e,{length:e,hit:function(){this.length--},isSunk:function(){return 0===this.length}}}}},t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(545),t=r.n(e),a=r(866),o=r.n(a),n=r(644),s=r.n(n);const c=(()=>{let e=s()("Player"),t=o()(),r=!0;function a(){if(t.attack(e),i.updateInfos(),i.displayHits(e,"#player-grid"),e.gameBoard.isAllSunk()){const e=document.querySelector("#avert");e.textContent="You lost!",e.style.color="red",document.querySelector("#change-orientation").classList.add("hidden"),document.querySelector("#buttons").classList.remove("hidden"),document.querySelector("#start-game").classList.add("inactive")}}return{launch:function(){i.computerReset(),t.placeShipsAtRandom(),document.querySelector("#opponent-grid").querySelectorAll(".grid-cell").forEach((o=>{o.addEventListener("click",(o=>{!function(o){if(r){const n=parseInt(o.target.getAttribute("data-x"),10),s=parseInt(o.target.getAttribute("data-y"),10);if(e.attacksMade.some((e=>e[0]===n&&e[1]===s)))return;if(e.attack(t,n,s),i.updateInfos(),i.displayHits(t,"#opponent-grid"),t.gameBoard.isAllSunk()){const e=document.querySelector("#avert");return e.textContent="You won!",e.style.color="green",document.querySelector("#change-orientation").classList.add("hidden"),document.querySelector("#buttons").classList.remove("hidden"),void document.querySelector("#start-game").classList.add("inactive")}r=!1,setTimeout(a,1e3),setTimeout((()=>{r=!0}),1e3)}}(o)}))}))},player:e,computer:t,playerTurn:r}})(),l=(()=>{function e(){c.player.attacksMade.length=0,c.computer.attacksMade.length=0,c.player.gameBoard.successfulAttacks.length=0,c.player.gameBoard.missedAttacks.length=0,c.computer.gameBoard.coordsShips.length=0,c.computer.gameBoard.ships.length=0,c.computer.gameBoard.successfulAttacks.length=0,c.computer.gameBoard.missedAttacks.length=0;for(let e=0;e<10;e++)for(let t=0;t<10;t++)c.computer.gameBoard.grid[e][t]=null}return{displayShips:function(e,t){const r=document.querySelector(t).querySelectorAll(".grid-cell");r.forEach((e=>{e.classList.remove("ship")})),e.gameBoard.coordsShips.forEach((e=>{const t=e[0],a=e[1],o=r[10*t+a];o&&o.classList.add("ship")}))},displayHits:function(e,t){const r=document.querySelector(t).querySelectorAll(".grid-cell");r.forEach((e=>{e.classList.remove("hit")})),e.gameBoard.successfulAttacks.forEach((e=>{const t=e[0],a=e[1],o=r[10*t+a];o&&o.classList.add("hit")})),e.gameBoard.missedAttacks.forEach((e=>{const t=e[0],a=e[1],o=r[10*t+a];o&&o.classList.add("miss")}))},placeShipsManually:function(){let e=document.querySelector("#player-grid");const r=e.cloneNode(!0);e.parentNode.replaceChild(r,e),e=r;const a=e.querySelectorAll(".grid-cell"),o=document.querySelector("#change-orientation");o.classList.remove("hidden");let n="h";o.addEventListener("click",(()=>{n="h"===n?"v":"h"}));const s=[5,4,3,3,2];let i=0;a.forEach((r=>{r.addEventListener("mouseover",(function(){const e=parseInt(r.getAttribute("data-x")),t=parseInt(r.getAttribute("data-y"));for(let r=0;r<s[i];r++){const a="h"===n?e:e+r,o="h"===n?t+r:t,s=document.querySelector(`.grid-cell[data-x="${a}"][data-y="${o}"]`);s&&(s.style.backgroundColor="rgb(139,22,217)")}})),r.addEventListener("mouseout",(function(){a.forEach((e=>{e.style.backgroundColor=""}))})),r.addEventListener("click",(function(){const a=parseInt(r.getAttribute("data-x")),d=parseInt(r.getAttribute("data-y"));c.player.gameBoard.placeShip(t()(s[i]),a,d,n)&&(l.displayShips(c.player,"#player-grid"),i++,i===s.length&&(setTimeout((()=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}),500),o.classList.add("hidden"),document.querySelector("#start-game").classList.remove("inactive")))}))}))},reset:function(){document.querySelector("#avert").textContent="",e(),c.player.gameBoard.coordsShips.length=0,c.player.gameBoard.ships.length=0;for(let e=0;e<10;e++)for(let t=0;t<10;t++)c.player.gameBoard.grid[e][t]=null;c.playerTurn=!0,document.querySelectorAll(".grid-cell").forEach((e=>{e.classList.remove("hit"),e.classList.remove("miss"),e.classList.remove("ship")})),document.querySelector("#change-orientation").classList.add("hidden"),document.querySelector("#buttons").classList.remove("hidden"),document.querySelector("#start-game").classList.add("inactive")},updateInfos:function(){const e=document.querySelector("#player-info-ships"),t=document.querySelector("#opponent-info-ships");e.textContent="Ship squares remaining: "+(17-c.player.gameBoard.successfulAttacks.length),t.textContent="Ship squares remaining: "+(17-c.computer.gameBoard.successfulAttacks.length),console.log(c.computer.gameBoard.successfulAttacks)},computerReset:e}})(),i=l;!function(){const e=document.querySelector("#player-grid"),t=document.querySelector("#opponent-grid");for(let r=0;r<10;r++)for(let a=0;a<10;a++){const o=document.createElement("div");o.classList.add("grid-cell"),o.setAttribute("data-x",r),o.setAttribute("data-y",a),e.appendChild(o);const n=document.createElement("div");n.classList.add("grid-cell"),n.setAttribute("data-x",r),n.setAttribute("data-y",a),t.appendChild(n)}}(),document.querySelector("#start-game").addEventListener("click",(()=>{document.querySelector("#buttons").classList.add("hidden"),c.launch()})),document.querySelector("#randomize-ships").addEventListener("click",(e=>{i.reset(),c.player.placeShipsAtRandom(),i.displayShips(c.player,"#player-grid"),document.querySelector("#start-game").classList.remove("inactive")})),document.querySelector("#manual-placement").addEventListener("click",(e=>{i.reset(),i.placeShipsManually()}))})()})();